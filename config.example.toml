[hotkey]
key = "right_cmd"

[audio]
sample_rate = 16000
channels = 1
dtype = "float32"
max_record_seconds = 30
# Keep recording this many seconds after key release to avoid clipping the utterance tail.
# Value is clamped to [0.0, 1.0].
release_tail_seconds = 0.25
# Add trailing silence before transcription for decoder stability.
# Value is clamped to [0.0, 1.0].
trailing_silence_seconds = 0.5
# If set, this exact input device is used first (name or index).
# input_device = "MacBook Air Microphone"
# Used only when input_device is not set. If omitted, behaves as playback_friendly.
# - system_default: keep current behavior and use macOS default input device.
# - external_preferred: prefer a connected non-default input device; fallback to default.
#   Note: depending on Bluetooth profile switching, music playback quality/volume can drop.
# - playback_friendly: avoid likely Bluetooth headset mics and prefer non-Bluetooth input.
input_device_policy = "playback_friendly"

[model]
size = "base"
language = "auto"
device = "mps"

[output]
mode = "clipboard_paste"
paste_shortcut = "cmd+v"

[runtime]
log_level = "INFO"
notify_on_error = true

[text]
# Optional transcription correction dictionary path.
# If not set, this default path is used:
#   ~/.config/moonshine-flow/transcription_corrections.toml
# Example dictionary file is bundled at:
#   https://github.com/NAKAK10/moonshine-flow/blob/main/transcription_corrections.example.toml
# dictionary_path = "~/.config/moonshine-flow/transcription_corrections.toml"

[text.llm_correction]
# Optional LLM-based post-correction after Moonshine transcription.
# always: enable every run
# never: disable every run
# ask: ask only on interactive (TTY) run; non-interactive run behaves as never
mode = "never"
# provider = "ollama" or "lmstudio"
provider = "ollama"
# Ollama default: http://localhost:11434
# LM Studio default: http://localhost:1234/v1
base_url = "http://localhost:11434"
model = "qwen2.5:7b-instruct"
# Clamped to [0.5, 5.0]
timeout_seconds = 2.5
# Clamped to [50, 5000]
max_input_chars = 500
# Reserved for OpenAI-compatible servers; ignored by most local setups.
# api_key = "sk-..."
# Enable tool calling only when using a model/server that supports it.
enabled_tools = false
